<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>COMBINE WA Intermediate R 2025-11-13: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../favicons/swc/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicons/swc/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicons/swc/favicon-16x16.png">
<link rel="manifest" href="../favicons/swc/site.webmanifest">
<link rel="mask-icon" href="../favicons/swc/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Software Carpentry" src="../assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Software Carpentry" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      COMBINE WA Intermediate R 2025-11-13
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            COMBINE WA Intermediate R 2025-11-13
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
<hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Basic Operation</a></li>
          </ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  COMBINE WA Intermediate R 2025-11-13
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-best-practices-R.html">1. Best Practices for Writing R Code</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-getting-started-rmarkdown.html">2. Getting started with R Markdown</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-making-packages-R.html">3. Making Packages in R</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
<li><a class="dropdown-item" href="discuss.html">Discussion</a></li>
<li><a class="dropdown-item" href="reference.html">Basic Operation</a></li>
                    </ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-best-practices-R"><p>Content from <a href="01-best-practices-R.html">Best Practices for Writing R Code</a></p>
<hr>
<p>Last updated on 2025-11-12 |

        <a href="https://github.com/adamhsparks/r-programming/edit/main/episodes/01-best-practices-R.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 15 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can I write R code that other people can understand and
use?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Describe changes made to code for future reference.</li>
<li>Understand the importance about requirements and dependencies for
your code.</li>
<li>Know when to use <code>setwd()</code>.</li>
<li>To identify and segregate distinct components in your code using
<code>#</code> or <code>#-</code>.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="keep-track-of-who-wrote-your-code-and-its-intended-purpose">Keep track of who wrote your code and its intended purpose<a class="anchor" aria-label="anchor" href="#keep-track-of-who-wrote-your-code-and-its-intended-purpose"></a>
</h3>
<p>Starting your code with an annotated description of what the code
does when it is run will help you when you have to look at or change it
in the future. Just one or two lines at the beginning of the file can
save you or someone else a lot of time and effort when trying to
understand what a particular script does.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># This is code to replicate the analyses and figures from my 2014 Science</span></span>
<span><span class="co"># paper. Code developed by Sarah Supp, Tracy Teal, and Jon Borelli</span></span></code></pre>
</div>
<p>Also consider version-controlling your code as for example taught by
<a href="https://swcarpentry.github.io/git-novice/" class="external-link">Software Carpentry’s
<code>git-novice</code> lessons</a>. Frequent commits with explanatory,
synoptic commit messages are an elegant way to comment code. <a href="https://docs.posit.co/ide/user/ide/guide/tools/version-control.html" class="external-link">RStudio
enables this with a Git integration</a>.</p>
</div>
<div class="section level3">
<h3 id="be-explicit-about-the-requirements-and-dependencies-of-your-code">Be explicit about the requirements and dependencies of your
code<a class="anchor" aria-label="anchor" href="#be-explicit-about-the-requirements-and-dependencies-of-your-code"></a>
</h3>
<p>Loading all of the packages that will be necessary to run your code
(using <code>library</code>) is a nice way of indicating which packages
are necessary to run your code. It can be frustrating to make it
two-thirds of the way through a long-running script only to find out
that a dependency hasn’t been installed.</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="va">ggplot2</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">dplyr</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="va">lubridate</span><span class="op">)</span></span></code></pre>
</div>
<p>Another way you can be explicit about the requirements of your code
and improve its reproducibility is to limit the “hard-coding” of the
input and output files for your script. If your code will read in data
from a file, define a variable early in your code that stores the path
to that file. For example:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">input_file</span> <span class="op">&lt;-</span> <span class="st">"data/data.csv"</span></span>
<span><span class="va">output_file</span> <span class="op">&lt;-</span> <span class="st">"data/results.csv"</span></span>
<span></span>
<span><span class="co"># read input</span></span>
<span><span class="va">input_data</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="va">input_file</span><span class="op">)</span></span>
<span><span class="co"># get number of samples in data</span></span>
<span><span class="va">sample_number</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">input_data</span><span class="op">)</span></span>
<span><span class="co"># generate results</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">some_other_function</span><span class="op">(</span><span class="va">input_file</span>, <span class="va">sample_number</span><span class="op">)</span></span>
<span><span class="co"># write results</span></span>
<span><span class="fu">write.table</span><span class="op">(</span><span class="va">results</span>, <span class="va">output_file</span><span class="op">)</span></span></code></pre>
</div>
<p>is preferable to:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># check</span></span>
<span><span class="va">input_data</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span><span class="st">"data/data.csv"</span><span class="op">)</span></span>
<span><span class="co"># get number of samples in data</span></span>
<span><span class="va">sample_number</span> <span class="op">&lt;-</span> <span class="fu">nrow</span><span class="op">(</span><span class="va">input_data</span><span class="op">)</span></span>
<span><span class="co"># generate results</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">some_other_function</span><span class="op">(</span><span class="st">"data/data.csv"</span>, <span class="va">sample_number</span><span class="op">)</span></span>
<span><span class="co"># write results</span></span>
<span><span class="fu">write.table</span><span class="op">(</span><span class="st">"data/results.csv"</span>, <span class="va">output_file</span><span class="op">)</span></span></code></pre>
</div>
<p>It is also worth considering what the working directory is. If the
working directory must change, it is best to do that at the beginning of
the script.</p>
<div id="be-careful-when-using-setwd" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="be-careful-when-using-setwd" class="callout-inner">
<h3 class="callout-title">Be careful when using
<code>setwd()</code>
</h3>
<div class="callout-content">
<p>One should exercise caution when using <code>setwd()</code>. Changing
directories in a script file can limit reproducibility:</p>
<ul>
<li>
<code>setwd()</code> will return an error if the directory to which
you’re trying to change doesn’t exist or if the user doesn’t have the
correct permissions to access that directory. This becomes a problem
when sharing scripts between users who have organized their directories
differently.</li>
<li>If/when your script terminates with an error, you might leave the
user in a different directory than the one they started in, and if they
then call the script again, this will cause further problems. If you
must use <code>setwd()</code>, it is best to put it at the top of the
script to avoid these problems. The following error message indicates
that R has failed to set the working directory you specified:</li>
</ul>
<pre><code>Error in setwd("~/path/to/working/directory") : cannot change working directory</code></pre>
<p>It is best practice to have the user running the script begin in a
consistent directory on their machine and then use relative file paths
from that directory to access files (see below).</p>
<p>Alternatively, consider using the <code>here</code> package to set
paths relative to your project root, <a href="https://here.r-lib.org/" class="external-link uri">https://here.r-lib.org/</a>. This works well with RStudio
projects, but there are other ways to work with it outside of RStudio.
You might also like to see “<a href="https://github.com/jennybc/here_here" class="external-link">Ode to the here package</a>”
by Jenny Bryan for why you might like to use it.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="identify-and-segregate-distinct-components-in-your-code">Identify and segregate distinct components in your code<a class="anchor" aria-label="anchor" href="#identify-and-segregate-distinct-components-in-your-code"></a>
</h3>
<p>It’s easy to annotate and mark your code using <code>#</code> or
<code>#-</code> to set off sections of your code and to make finding
specific parts of your code easier. For example, it’s often helpful when
writing code to separate the function definitions. If you create only
one or a few custom functions in your script, put them toward the top of
your code. If you have written many functions, put them all in their
own. R file and then<code>source</code> those files. <code>source</code>
will define all of these functions so that your code can make use of
them as needed.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">source</span><span class="op">(</span><span class="st">"my_genius_fxns.R"</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level3">
<h3 id="other-ideas">Other ideas<a class="anchor" aria-label="anchor" href="#other-ideas"></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Use a consistent style within your code. For example, name all
matrices something ending in <code>_mat</code>. Consistency makes code
easier to read and problems easier to spot.</p></li>
<li><p>Keep your code in bite-sized chunks. If a single function or loop
gets too long, consider looking for ways to break it into smaller
pieces.</p></li>
<li><p>Don’t repeat yourself–automate! If you are repeating the same
code over and over, use a loop or a function to repeat that code for
you. Needless repetition doesn’t just waste time–it also increases the
likelihood you’ll make a costly mistake!</p></li>
<li><p>Keep all of your source files for a <a href="https://posit.co/resources/videos/programming-part-1-writing-code-in-rstudio/" class="external-link">project
in the same directory</a>, then use relative paths as necessary to
access them. For example, use</p></li>
</ol>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"files/dataset-2013-01.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<p>rather than:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">read.csv</span><span class="op">(</span>file <span class="op">=</span> <span class="st">"/Users/Karthik/Documents/sannic-project/files/dataset-2013-01.csv"</span>, header <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<ol start="5" style="list-style-type: decimal">
<li>R can run into memory issues. It is a common problem to run out of
memory after running R scripts for a long time. To inspect the objects
in your current R environment, you can list the objects, search current
packages, and remove objects that are currently not in use. A good
practice when running long lines of computationally intensive code is to
remove temporary objects after they have served their purpose. However,
sometimes, R will not clean up unused memory for a while after you
delete objects. You can force R to tidy up its memory by using
<code>gc()</code>.</li>
</ol>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample dataset of 1000 rows</span></span>
<span><span class="va">interim_object</span> <span class="op">&lt;-</span> <span class="fu">data.frame</span><span class="op">(</span></span>
<span>  <span class="fu">rep</span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">100</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  <span class="fu">rep</span><span class="op">(</span><span class="fl">101</span><span class="op">:</span><span class="fl">200</span>, <span class="fl">10</span><span class="op">)</span>,</span>
<span>  <span class="fu">rep</span><span class="op">(</span><span class="fl">201</span><span class="op">:</span><span class="fl">300</span>, <span class="fl">10</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="fu">object.size</span><span class="op">(</span><span class="va">interim_object</span><span class="op">)</span> <span class="co"># Reports the memory size allocated to the object</span></span>
<span><span class="fu">rm</span><span class="op">(</span><span class="st">"interim_object"</span><span class="op">)</span> <span class="co"># Removes only the object itself and not necessarily the memory allotted to it</span></span>
<span><span class="fu">gc</span><span class="op">(</span><span class="op">)</span> <span class="co"># Force R to release memory it is no longer using</span></span>
<span><span class="fu">ls</span><span class="op">(</span><span class="op">)</span> <span class="co"># Lists all the objects in your current workspace</span></span>
<span><span class="fu">rm</span><span class="op">(</span>list <span class="op">=</span> <span class="fu">ls</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="co"># If you want to delete all the objects in the workspace and start with a clean slate</span></span></code></pre>
</div>
<ol start="6" style="list-style-type: decimal">
<li><p>Don’t save a session history (the default option in R, when it
asks if you want an <code>RData</code> file). Instead, start in a clean
environment so that older objects don’t remain in your environment any
longer than they need to. If that happens, it can lead to unexpected
results. <em>You can disable this in RStudio as well, as follows:</em>
Go to your menu bar, then click Tools → Global Options to open up the
Options window. <img src="../fig/rstudio_settings.png" alt='Screenshot of the RStudio Global Options, with "Restore .RData into workspace at startup" unchecked, and "Save workspace to .RData on exit" set to "Never".' class="figure">
Make sure your settings match those highlighted in yellow. We don’t want
RStudio to store the current status of our R session and reload it the
next time we start R. This might sound convenient, but for the sake of
reproducibility, we want to start with a clean, empty R session every
time we work. That means that we have to record everything we do into
scripts, save any data we need into files, and store outputs like images
as files. We want to get used to everything we generate in a single R
session being <em>disposable</em>. We want our scripts to be able to
regenerate things we need, other than “raw materials” like data.
Instead, start in a clean environment so that older objects don’t remain
in your environment any longer than they need to. If that happens, it
can lead to unexpected results.</p></li>
<li><p>Wherever possible, <a href="https://stackoverflow.com/a/21967272/4341322" class="external-link">keep track of
<code>sessionInfo()</code> somewhere</a> in your project folder. Session
information is invaluable because it captures all the packages used in
the current project. If a newer version of a package changes the way a
function behaves, you can always go back and reinstall the version that
worked (Note: At least on CRAN, all older versions of packages are
permanently archived).</p></li>
<li><p>Collaborate. Grab a buddy and practice “code review”. Review is
used for preparing experiments and manuscripts; why not use it for code
as well? Our code is also a major scientific achievement and the product
of lots of hard work! Reviews are built into <a href="https://github.com/skills/review-pull-requests" class="external-link">GitHub’s Pull
request feature</a>.</p></li>
<li><p>Use <a href="https://swcarpentry.github.io/r-novice-gapminder/02-project-intro.html" class="external-link">RStudio
projects</a> to manage your work.</p></li>
</ol>
<div id="exercise-creating-a-self-contained-project" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="exercise-creating-a-self-contained-project" class="callout-inner">
<h3 class="callout-title">Exercise: Creating a Self-contained
Project</h3>
<div class="callout-content">
<p>We’re going to create a new project in RStudio and save some data for
later use:</p>
<ol style="list-style-type: decimal">
<li>Click the “File” menu button, then “New Project”.</li>
<li>Click “New Directory”.</li>
<li>Click “New Project”.</li>
<li>Type in the name of the directory to store your project,
<em>e.g.</em>, “my_project”.</li>
<li>Click the “Create Project” button.</li>
<li>Tick the “Open project in new session” box and click “OK”.</li>
<li>In your new RStudio project window, from the Files pane, click on
the “New Folder” button and create a new directory called “data”.</li>
<li>Download the file located at <a href="https://github.com/adamhsparks/2025-11-13-COMBINE-WA-morning/blob/main/episodes/data/SAFI_clean.csv" class="external-link uri">https://github.com/adamhsparks/2025-11-13-COMBINE-WA-morning/blob/main/episodes/data/SAFI_clean.csv</a>
and save it in the “data” directory you just created in your new project
folder.</li>
</ol>
</div>
</div>
</div>
<p>The simplest way to open an RStudio project once it has been created
is to click through your file system to get to the directory where it
was saved and double click on the <code>.Rproj</code> file. This will
open RStudio and start your R session in the same directory as the
<code>.Rproj</code> file. All your data, plots and scripts will now be
relative to the project directory. RStudio projects have the added
benefit of allowing you to open multiple projects at the same time each
open to its own project directory. This allows you to keep multiple
projects open without them interfering with each other.</p>
<div id="best-practice-discussion" class="callout discussion">
<div class="callout-square">
<i class="callout-icon" data-feather="message-circle"></i>
</div>
<span class="callout-header">Discussion</span>
<div id="best-practice-discussion" class="callout-inner">
<h3 class="callout-title">Best Practice Discussion</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>What other suggestions do you have for coding best practices?</li>
</ol>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>Start each program with a description of what it does.</li>
<li>Then load all required packages.</li>
<li>Consider what working directory you are in when sourcing a
script.</li>
<li>Use comments to mark off sections of code.</li>
<li>Put function definitions at the top of your file, or in a separate
file if there are many.</li>
<li>Name and style code consistently.</li>
<li>Break code into small, discrete pieces.</li>
<li>Factor out common operations rather than repeating them.</li>
<li>Keep all of the source files for a project in one directory and use
relative paths to access them.</li>
<li>Keep track of the memory used by your program.</li>
<li>Always start with a clean environment instead of saving the
workspace.</li>
<li>Keep track of session information in your project folder.</li>
<li>Have someone else review your code.</li>
<li>Use version control.</li>
</ul>
</div>
</div>
</div>
</div></section><section id="aio-02-getting-started-rmarkdown"><p>Content from <a href="02-getting-started-rmarkdown.html">Getting started with R Markdown</a></p>
<hr>
<p>Last updated on 2025-11-12 |

        <a href="https://github.com/adamhsparks/r-programming/edit/main/episodes/02-getting-started-rmarkdown.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 45 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div id="accordionInstructor1" class="accordion instructor-note accordion-flush">
<div class="accordion-item">
<button class="accordion-button instructor-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInstructor1" aria-expanded="false" aria-controls="collapseInstructor1">
  <h3 class="accordion-header" id="headingInstructor1">  <div class="note-square"><i aria-hidden="true" class="callout-icon" data-feather="edit-2"></i></div> Instructor Note </h3>
</button>
<div id="collapseInstructor1" class="accordion-collapse collapse" data-bs-parent="#accordionInstructor1" aria-labelledby="headingInstructor1">
<div class="accordion-body">
<ul>
<li>This is an optional lesson intended to introduce learners to R
Markdown.</li>
<li>While it is listed after the core lessons, some instructors may
prefer to teach it early in the workshop, depending on the
audience.</li>
</ul>
</div>
</div>
</div>
</div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What is R Markdown?</li>
<li>What is Quarto?</li>
<li>How can I integrate my R code with text and plots?</li>
<li>How can I convert .Rmd files to .html?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Create a .Rmd document containing R code, text, and plots</li>
<li>Create a YAML header to control output</li>
<li>Understand basic syntax of (R)Markdown</li>
<li>Customise code chunks to control formatting</li>
<li>Use code chunks and in-line code to create dynamic, reproducible
documents</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="original-lesson">Original Lesson<a class="anchor" aria-label="anchor" href="#original-lesson"></a>
</h2>
<hr class="half-width">
<p>This episode is based on the R for Social Scientists lesson. The
original episode can be found here, <a href="https://preview.carpentries.org/r-socialsci/06-rmarkdown.html" class="external-link uri">https://preview.carpentries.org/r-socialsci/06-rmarkdown.html</a>.</p>
</section><section><h2 class="section-heading" id="r-markdown">R Markdown<a class="anchor" aria-label="anchor" href="#r-markdown"></a>
</h2>
<hr class="half-width">
<p>R Markdown is a flexible type of document that allows you to
seamlessly combine executable R code, and its output, with text in a
single document. These documents can be readily converted to multiple
static and dynamic output formats, including PDF (.pdf), Word (.docx),
and HTML (.html).</p>
<p>The benefit of a well-prepared R Markdown document is full
reproducibility. This also means that, if you notice a data
transcription error, or you are able to add more data to your analysis,
you will be able to recompile the report without making any changes in
the actual document.</p>
<p>The <strong>rmarkdown</strong> package comes pre-installed with
RStudio, so no action is necessary.</p>
<figure><img src="../fig/rmarkdown_wizards.png" alt="R Markdown wizard monsters creating a R Markdown document from a recipe. Art by Allison Horst" width="100%" style="display: block; margin: auto;" class="figure"><figcaption>
Image credit:
<a href="https://github.com/allisonhorst/stats-illustrations" class="external-link">Allison
Horst</a>
</figcaption></figure></section><section><h2 class="section-heading" id="a-note-on-quarto">A Note on Quarto<a class="anchor" aria-label="anchor" href="#a-note-on-quarto"></a>
</h2>
<hr class="half-width">
<p>Quarto is a next-generation version of R Markdown that extends its
capabilities to support multiple programming languages (including R,
Python, and Julia) and offers enhanced features for creating dynamic
documents, presentations, websites, and books. Quarto builds upon the
foundation of R Markdown while providing a more versatile and powerful
framework for reproducible research and reporting. Unlike R Markdown,
you must install Quarto separately from RStudio. Instructions for
installing Quarto can be found at <a href="https://quarto.org/docs/get-started/" class="external-link uri">https://quarto.org/docs/get-started/</a>. However, Quarto
and R Markdown can coexist on the same system, and RStudio supports both
formats and simply resaving or renaming a .Rmd to a .qmd file will
convert it from an R Markdown document to a Quarto document. I won’t
spend time on Quarto here for this reason, but you can learn more about
Quarto at <a href="https://quarto.org/" class="external-link uri">https://quarto.org/</a>.</p>
<figure><figure><img src="../fig/quarto_schematic.png" alt="A schematic representing the multi-language input (e.g. Python, R, Observable, Julia) and multi-format output (e.g., PDF, html, Word documents, and more) versatility of Quarto. Art by Allison Horst" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><figcaption>
Image credit:
<a href="https://allisonhorst.com/cetinkaya-rundel-lowndes-quarto-keynote" class="external-link">Artwork
from “Hello, Quarto” keynote by Julia Lowndes and Mine Çetinkaya-Rundel,
presented at RStudio Conference 2022. Illustrated by Allison Horst.</a>
</figcaption></figure></section><section><h2 class="section-heading" id="creating-an-r-markdown-file">Creating an R Markdown file<a class="anchor" aria-label="anchor" href="#creating-an-r-markdown-file"></a>
</h2>
<hr class="half-width">
<p>To create a new R Markdown document in RStudio, click
<code>File -&gt; New File -&gt; R Markdown</code>:</p>
<figure><img src="../fig/new-rmd.png" alt="Screenshot of the New R Markdown file dialogue box in RStudio" class="figure mx-auto d-block"></figure><p>Then click on ‘Create Empty Document’. Normally you could enter the
title of your document, your name (Author), and select the type of
output, but we will be learning how to start from a blank document.</p>
</section><section><h2 class="section-heading" id="basic-components-of-r-markdown">Basic components of R Markdown<a class="anchor" aria-label="anchor" href="#basic-components-of-r-markdown"></a>
</h2>
<hr class="half-width">
<p>To control the output, a YAML (YAML Ain’t Markup Language) header is
needed:</p>
<pre><code>---
title: "My Awesome Report"
author: "Emmet Brickowski"
date: ""
output: html_document
---</code></pre>
<p>The header is defined by the three hyphens at the beginning
(<code>---</code>) and the three hyphens at the end
(<code>---</code>).</p>
<p>In the YAML, the only required field is the <code>output:</code>,
which specifies the type of output you want. This can be an
<code>html_document</code>, a <code>pdf_document</code>, or a
<code>word_document</code>. We will start with an HTML document and
discuss the other options later.</p>
<p>The rest of the fields can be deleted, if you don’t need them. After
the header, to begin the body of the document, you start typing after
the end of the YAML header (i.e. after the second <code>---</code>).</p>
</section><section><h2 class="section-heading" id="markdown-syntax">Markdown syntax<a class="anchor" aria-label="anchor" href="#markdown-syntax"></a>
</h2>
<hr class="half-width">
<p>Markdown is a popular markup language that allows you to add
formatting elements to text, such as <strong>bold</strong>,
<em>italics</em>, and <code>code</code>. The formatting will not be
immediately visible in a markdown (.md) document, like you would see in
a Word document. Rather, you add Markdown syntax to the text, which can
then be converted to various other files that can translate the Markdown
syntax. Markdown is useful because it is lightweight, flexible, and
platform independent.</p>
<p>Some platforms provide a real time preview of the formatting, like
RStudio’s visual markdown editor (available from version 1.4).</p>
<p>First, let’s create a heading! A <code>#</code> in front of text
indicates to Markdown that this text is a heading. Adding more
<code>#</code>s make the heading smaller, i.e. one <code>#</code> is a
first level heading, two <code>##</code>s is a second level heading,
etc. upto the 6th level heading.</p>
<pre><code><span><span class="co"># Title</span></span>
<span><span class="co">## Section</span></span>
<span><span class="co">### Sub-section</span></span>
<span><span class="co">#### Sub-sub section</span></span>
<span><span class="co">##### Sub-sub-sub section</span></span>
<span><span class="co">###### Sub-sub-sub-sub section</span></span></code></pre>
<p>(only use a level if the one above is also in use)</p>
<p>Since we have already defined our title in the YAML header, we will
use a section heading to create an Introduction section.</p>
<pre><code><span><span class="co">## Introduction</span></span></code></pre>
<p>You can make things <strong>bold</strong> by surrounding the word
with double asterisks, <code>**bold**</code>, or double underscores,
<code>__bold__</code>; and <em>italicize</em> using single asterisks,
<code>*italics*</code>, or single underscores,
<code>_italics_</code>.</p>
<p>You can also combine <strong>bold</strong> and <em>italics</em> to
write something <strong><em>really</em></strong> important with
triple-asterisks, <code>***really***</code>, or underscores,
<code>___really___</code>; and, if you’re feeling bold (pun intended),
you can also use a combination of asterisks and underscores,
<code>**_really_**</code>, <code>**_really_**</code>.</p>
<p>To create <code>code-type</code> font, surround the word with
backticks, <code>`code-type`</code>.</p>
<p>Now that we’ve learned a couple of things, it might be useful to
implement them:</p>
<pre><code>## Introduction

This report uses the **tidyverse** package along with the *SAFI* dataset,
which has columns that include:</code></pre>
<p>Then we can create a list for the variables using <code>-</code>,
<code>+</code>, or <code>*</code> keys.</p>
<pre><code>## Introduction

This report uses the **tidyverse** package along with the *SAFI* dataset,
which has columns that include:

- village
- interview_date
- no_members
- years_liv
- respondent_wall_type
- rooms</code></pre>
<p>You can also create an ordered list using numbers:</p>
<pre><code>1. village
2. interview_date
3. no_members
4. years_liv
5. respondent_wall_type
6. rooms</code></pre>
<p>And nested items by tab-indenting:</p>
<pre><code>- village
  + Name of village
- interview_date
  + Date of interview
- no_members
  + How many family members lived in a house
- years_liv
  + How many years respondent has lived in village or neighbouring village
- respondent_wall_type
  + Type of wall of house
- rooms
  + Number of rooms in house</code></pre>
<p>For more Markdown syntax see <a href="https://www.markdownguide.org/basic-syntax" class="external-link">the following
reference guide</a>.</p>
<p>Now we can render the document into HTML by clicking the
<strong>Knit</strong> button in the top of the Source pane (top left),
or use the keyboard shortcut
<kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd> on Windows and Linux, and
<kbd>Cmd</kbd>+<kbd>Shift</kbd>+<kbd>K</kbd> on Mac. If you haven’t
saved the document yet, you will be prompted to do so when you
<strong>Knit</strong> for the first time.</p>
<figure><img src="../fig/rmd-rmd_to_html.png" alt="The 'knitting' process: First, R Markdown is converted to Markdown, which is then converted (via pandoc) to .html, .pdf, .docx, etc." class="figure mx-auto d-block"></figure></section><section><h2 class="section-heading" id="writing-an-r-markdown-report">Writing an R Markdown report<a class="anchor" aria-label="anchor" href="#writing-an-r-markdown-report"></a>
</h2>
<hr class="half-width">
<p>Now we will add some R code from our previous data wrangling and
visualisation, which means we need to make sure
<strong>tidyverse</strong> is loaded. It is not enough to load
<strong>tidyverse</strong> from the console, we will need to load it
within our R Markdown document. The same applies to our data. To load
these, we will need to create a ‘code chunk’ at the top of our document
(below the YAML header).</p>
<p>A code chunk can be inserted by clicking Code &gt; Insert Chunk, or
by using the keyboard shortcuts
<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>I</kbd> on Windows and Linux, and
<kbd>Cmd</kbd>+<kbd>Option</kbd>+<kbd>I</kbd> on Mac.</p>
<p>The syntax of a code chunk is:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="in">```{r chunk-name}</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="in">"Here is where you place the R code that you want to run."</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>An R Markdown document knows that this text is not part of the report
from the <code>```</code> that begins and ends the chunk. It also knows
that the code inside the chunk is R code from the <code>r</code> inside
the curly braces (<code>{}</code>). After the <code>r</code> you can add
a name for the code chunk. Naming a chunk is optional, but recommended.
Each chunk name must be unique, and only contain alphanumeric characters
and <code>-</code>.</p>
<p>To load <strong>tidyverse</strong> and our
<code>SAFI_clean.csv</code> file, we will insert a chunk and call it
‘setup’. Since we don’t want this code or the output to show in our
knitted HTML document, we add an <code>include = FALSE</code> option
after the code chunk name (<code>{r setup, include = FALSE}</code>).</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="in">```{r setup, include = FALSE}</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="in">library(tidyverse)</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="in">library(here)</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="in">interviews &lt;- read_csv(here("data/SAFI_clean.csv"), na = "NULL")</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<div id="important-note" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="important-note" class="callout-inner">
<h3 class="callout-title">Important Note!</h3>
<div class="callout-content">
<p>The file paths you give in a .Rmd document, <em>e.g.</em> to load a
.csv file, are relative to the .Rmd document, <strong>not</strong> the
project root.</p>
<p>As suggested in the Starting with Data episode, we highly recommend
the use of the <code>here()</code> function to keep the file paths
consistent within your project.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="insert-table">Insert table<a class="anchor" aria-label="anchor" href="#insert-table"></a>
</h2>
<hr class="half-width">
<p>Next, we will re-create a table from the Data Wrangling episode which
shows the average household size grouped by <code>village</code> and
<code>memb_assoc</code>. We can do this by creating a new code chunk and
calling it ‘interview-tbl’. Or, you can come up with something more
creative (just remember to stick to the naming rules).</p>
<p>It isn’t necessary to <strong>Knit</strong> your document every time
you want to see the output. Instead, you can run the code chunk with the
green triangle in the top right corner of the chunk, or with the
keyboard shortcuts: <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>C</kbd> on
Windows and Linux, or <kbd>Cmd</kbd>+<kbd>Option</kbd>+<kbd>C</kbd> on
Mac.</p>
<p>To make sure the table is formatted nicely in our output document, we
will need to use the <code>kable()</code> function from the
<strong>knitr</strong> package. The <code>kable()</code> function takes
the output of your R code and knits it into a nice looking HTML table.
You can also specify different aspects of the table, e.g. the column
names, a caption, etc.</p>
<p>Run the code chunk to make sure you get the desired output.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interviews</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">filter</span><span class="op">(</span><span class="op">!</span><span class="fu">is.na</span><span class="op">(</span><span class="va">memb_assoc</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">village</span>, <span class="va">memb_assoc</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_no_membrs <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">no_membrs</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu">kable</span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"We can also add a caption."</span>,</span>
<span>               col.names <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"Village"</span>, <span class="st">"Member Association"</span>,</span>
<span>                             <span class="st">"Mean Number of Members"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<table class="table">
<caption>We can also add a caption.</caption>
<thead><tr>
<th align="left">Village</th>
<th align="left">Member Association</th>
<th align="right">Mean Number of Members</th>
</tr></thead>
<tbody>
<tr>
<td align="left">Chirodzo</td>
<td align="left">no</td>
<td align="right">8.062500</td>
</tr>
<tr>
<td align="left">Chirodzo</td>
<td align="left">yes</td>
<td align="right">7.818182</td>
</tr>
<tr>
<td align="left">God</td>
<td align="left">no</td>
<td align="right">7.133333</td>
</tr>
<tr>
<td align="left">God</td>
<td align="left">yes</td>
<td align="right">8.000000</td>
</tr>
<tr>
<td align="left">Ruaca</td>
<td align="left">no</td>
<td align="right">7.178571</td>
</tr>
<tr>
<td align="left">Ruaca</td>
<td align="left">yes</td>
<td align="right">9.500000</td>
</tr>
</tbody>
</table>
<p>Many different R packages can be used to generate tables. Some of the
more commonly used options are listed in the table below.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="19%">
<col width="59%">
</colgroup>
<thead><tr>
<th>Name</th>
<th>Creator(s)</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr>
<td><a href="https://condformat.sergioller.com/index.html" class="external-link">condformat</a></td>
<td><a href="https://cran.rstudio.com/web/packages/condformat/index.html" class="external-link">Oller
Moreno (2022)</a></td>
<td>Apply and visualize conditional formatting to data frames in R. It
renders a data frame with cells formatted according to criteria defined
by rules, using a tidy evaluation syntax.</td>
</tr>
<tr>
<td><a href="https://rstudio.github.io/DT/" class="external-link">DT</a></td>
<td><a href="https://cran.r-project.org/web/packages/DT/index.html" class="external-link">Xie
et al. (2023)</a></td>
<td>Data objects in R can be rendered as HTML tables using the
JavaScript library ‘DataTables’ (typically via R Markdown or Shiny). The
‘DataTables’ library has been included in this R package.</td>
</tr>
<tr>
<td><a href="https://github.com/renkun-ken/formattable" class="external-link">formattable</a></td>
<td><a href="https://cran.r-project.org/web/packages/formattable/index.html" class="external-link">Ren
and Russell (2021)</a></td>
<td>Provides functions to create formattable vectors and data frames.
‘Formattable’ vectors are printed with text formatting, and formattable
data frames are printed with multiple types of formatting in HTML to
improve the readability of data presented in tabular form rendered on
web pages.</td>
</tr>
<tr>
<td><a href="https://davidgohel.github.io/flextable/" class="external-link">flextable</a></td>
<td><a href="https://cran.r-project.org/web/packages/flextable/index.html" class="external-link">Gohel
and Skintzos (2023)</a></td>
<td>Use a grammar for creating and customizing pretty tables. The
following formats are supported: ‘HTML’, ‘PDF’, ‘RTF’, ‘Microsoft Word’,
‘Microsoft PowerPoint’ and R ‘Grid Graphics’. ‘R Markdown’, ‘Quarto’,
and the package ‘officer’ can be used to produce the result files.</td>
</tr>
<tr>
<td><a href="https://gt.rstudio.com/" class="external-link">gt</a></td>
<td><a href="https://cloud.r-project.org/web/packages/gt/index.html" class="external-link">Iannone et
al. (2022)</a></td>
<td>Build display tables from tabular data with an easy-to-use set of
functions. With its progressive approach, we can construct display
tables with cohesive table parts. Table values can be formatted using
any of the included formatting functions.</td>
</tr>
<tr>
<td><a href="https://hughjonesd.github.io/huxtable/" class="external-link">huxtable</a></td>
<td><a href="https://cran.r-project.org/web/packages/huxtable/index.html" class="external-link">Hugh-Jones
(2022)</a></td>
<td>Creates styled tables for data presentation. Export to HTML, LaTeX,
RTF, ‘Word’, ‘Excel’, and ‘PowerPoint’. Simple, modern interface to
manipulate borders, size, position, captions, colours, text styles and
number formatting.</td>
</tr>
<tr>
<td><a href="https://rapporter.github.io/pander/" class="external-link">pander</a></td>
<td><a href="https://cran.r-project.org/web/packages/pander/index.html" class="external-link">Daróczi
and Tsegelskyi (2022)</a></td>
<td>Contains some functions catching all messages, ‘stdout’ and other
useful information while evaluating R code and other helpers to return
user specified text elements (e.g., header, paragraph, table, image,
lists etc.) in ‘pandoc’ markdown or several types of R objects similarly
automatically transformed to markdown format.</td>
</tr>
<tr>
<td><a href="https://pixiedust.github.io/pixiedust/" class="external-link">pixiedust</a></td>
<td><a href="https://cran.rstudio.com/web/packages/pixiedust/index.html" class="external-link">Nutter
and Kretch (2021)</a></td>
<td>‘pixiedust’ provides tidy data frames with a programming interface
intended to be similar to ’ggplot2’s system of layers with fine-tuned
control over each cell of the table.</td>
</tr>
<tr>
<td><a href="https://glin.github.io/reactable/" class="external-link">reactable</a></td>
<td><a href="https://cran.r-project.org/web/packages/reactable/index.html" class="external-link">Lin
et al. (2023)</a></td>
<td>Interactive data tables for R, based on the ‘React Table’ JavaScript
library. Provides an HTML widget that can be used in ‘R Markdown’ or
‘Quarto’ documents, ‘Shiny’ applications, or viewed from an R
console.</td>
</tr>
<tr>
<td><a href="https://jrowen.github.io/rhandsontable/" class="external-link">rhandsontable</a></td>
<td><a href="https://cran.r-project.org/web/packages/rhandsontable/index.html" class="external-link">Owen
et al. (2021)</a></td>
<td>An R interface to the ‘Handsontable’ JavaScript library, which is a
minimalist Excel-like data grid editor.</td>
</tr>
<tr>
<td><a href="https://github.com/cran/stargazer" class="external-link">stargazer</a></td>
<td><a href="https://cran.r-project.org/web/packages/stargazer/index.html" class="external-link">Hlavac
(2022)</a></td>
<td>Produces LaTeX code, HTML/CSS code and ASCII text for well-formatted
tables that hold regression analysis results from several models
side-by-side, as well as summary statistics.</td>
</tr>
<tr>
<td><a href="https://github.com/dmurdoch/tables" class="external-link">tables</a></td>
<td><a href="https://cran.r-project.org/web/packages/tables/index.html" class="external-link">Murdoch
(2022)</a></td>
<td>Computes and displays complex tables of summary statistics. Output
may be in LaTeX, HTML, plain text, or an R matrix for further
processing.</td>
</tr>
<tr>
<td><a href="https://github.com/spgarbet/tangram" class="external-link">tangram</a></td>
<td><a href="https://cran.r-project.org/web/packages/tangram/index.html" class="external-link">Garbett
et al. (2023)</a></td>
<td>Provides an extensible formula system to quickly and easily create
production quality tables. The processing steps are a formula parser,
statistical content generation from data defined by a formula, and
rendering into a table.</td>
</tr>
<tr>
<td><a href="https://github.com/cran/xtable" class="external-link">xtable</a></td>
<td><a href="https://cran.r-project.org/web/packages/xtable/index.html" class="external-link">Dahl et
al. (2019)</a></td>
<td>Coerce data to LaTeX and HTML tables.</td>
</tr>
<tr>
<td><a href="https://github.com/cardiomoon/ztable" class="external-link">ztable</a></td>
<td><a href="https://cran.r-project.org/web/packages/ztable/index.html" class="external-link">Moon
(2021)</a></td>
<td>Makes zebra-striped tables (tables with alternating row colors) in
LaTeX and HTML formats easily from a data.frame, matrix, lm, aov, anova,
glm, coxph, nls, fitdistr, mytable and cbind.mytable objects.</td>
</tr>
</tbody>
</table></section><section><h2 class="section-heading" id="customising-chunk-output">Customising chunk output<a class="anchor" aria-label="anchor" href="#customising-chunk-output"></a>
</h2>
<hr class="half-width">
<p>We mentioned using <code>include = FALSE</code> in a code chunk to
prevent the code and output from printing in the knitted document. There
are additional options available to customise how the code-chunks are
presented in the output document. The options are entered in the code
chunk after <code>chunk-name</code> and separated by commas,
<em>e.g.</em>
<code>{r chunk-name, eval = FALSE, echo = TRUE}</code>.</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="5%">
<col width="88%">
</colgroup>
<thead><tr>
<th>Option</th>
<th>Options</th>
<th>Output</th>
</tr></thead>
<tbody>
<tr>
<td><code>eval</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not the code within the code chunk should be run.</td>
</tr>
<tr>
<td><code>echo</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Choose if you want to show your code chunk in the output document.
<code>echo = TRUE</code> will show the code chunk.</td>
</tr>
<tr>
<td><code>include</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Choose if the output of a code chunk should be included in the
document. <code>FALSE</code> means that your code will run, but will not
show up in the document.</td>
</tr>
<tr>
<td><code>warning</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not you want your output document to display potential
warning messages produced by your code.</td>
</tr>
<tr>
<td><code>message</code></td>
<td>
<code>TRUE</code> or <code>FALSE</code>
</td>
<td>Whether or not you want your output document to display potential
messages produced by your code.</td>
</tr>
<tr>
<td><code>fig.align</code></td>
<td>
<code>default</code>, <code>left</code>, <code>right</code>,
<code>center</code>
</td>
<td>Where the figure from your R code chunk should be output on the
page</td>
</tr>
</tbody>
</table>
<div id="tip" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="tip" class="callout-inner">
<h3 class="callout-title">Tip</h3>
<div class="callout-content">
<ul>
<li>The default settings for the above chunk options are all
<code>TRUE</code>.</li>
<li>The default settings can be modified per chunk, or with
<code>knitr::opts_chunk$set()</code>,</li>
<li>Entering <code>knitr::opts_chunk$set(echo = FALSE)</code> will
change the default of value of <code>echo</code> to <code>FALSE</code>
for <strong>every</strong> code chunk in the document.</li>
</ul>
</div>
</div>
</div>
<div id="exercise" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Play around with the different options in the chunk with the code for
the table, and re-<strong>Knit</strong> to see what each option does to
the output.</p>
<p>What happens if you use <code>eval = FALSE</code> and
<code>echo = FALSE</code>? What is the difference between this and
<code>include = FALSE</code>?</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Solution to Exercise </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Create a chunk with <code>{r eval = FALSE, echo = FALSE}</code>, then
create another chunk with <code>{r include = FALSE}</code> to compare.
<code>eval = FALSE</code> and <code>echo = FALSE</code> will neither run
the code in the chunk, nor show the code in the knitted document. The
code chunk essentially doesn’t exist in the knitted document as it was
never run. Whereas <code>include = FALSE</code> will run the code and
store the output for later use.</p>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="in-line-r-code">In-line R code<a class="anchor" aria-label="anchor" href="#in-line-r-code"></a>
</h2>
<hr class="half-width">
<p>Now we will use some in-line R code to present some descriptive
statistics. To use in-line R-code, we use the same backticks that we
used in the Markdown section, with an <code>r</code> to specify that we
are generating R-code. The difference between in-line code and a code
chunk is the number of backticks. In-line R code uses one backtick
(<code>`r`</code>), whereas code chunks use three backticks
(<code>```r```</code>).</p>
<p>For example, today’s date is <code>`r Sys.Date()`</code>, will be
rendered as: today’s date is 2025-11-12. The code will display today’s
date in the output document (well, technically the date the document was
last knitted).</p>
<p>The best way to use in-line R code, is to minimise the amount of code
you need to produce the in-line output by preparing the output in code
chunks. Let’s say we’re interested in presenting the average household
size in a village.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># create a summary data frame with the mean household size by village</span></span>
<span><span class="va">mean_household</span> <span class="op">&lt;-</span> <span class="va">interviews</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">village</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>    <span class="fu">summarize</span><span class="op">(</span>mean_no_membrs <span class="op">=</span> <span class="fu">mean</span><span class="op">(</span><span class="va">no_membrs</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># and select the village we want to use</span></span>
<span><span class="va">mean_chirodzo</span> <span class="op">&lt;-</span> <span class="va">mean_household</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">filter</span><span class="op">(</span><span class="va">village</span> <span class="op">==</span> <span class="st">"Chirodzo"</span><span class="op">)</span></span></code></pre>
</div>
<p>Now we can make an informative statement on the means of each
village, and include the mean values as in-line R-code. For example:</p>
<p>The average household size in the village of Chirodzo is
<code>`r round(mean_chirodzo$mean_no_membrs, 2)`</code></p>
<p>becomes…</p>
<p>The average household size in the village of Chirodzo is 7.08.</p>
<p>Because we are using in-line R code instead of the actual values, we
have created a dynamic document that will automatically update if we
make changes to the dataset and/or code chunks.</p>
</section><section><h2 class="section-heading" id="plots">Plots<a class="anchor" aria-label="anchor" href="#plots"></a>
</h2>
<hr class="half-width">
<p>Create a new set of data using this code chunk.</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interviews_plotting</span> <span class="op">&lt;-</span> <span class="va">interviews</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## pivot wider by items_owned</span></span>
<span>  <span class="fu">separate_rows</span><span class="op">(</span><span class="va">items_owned</span>, sep <span class="op">=</span> <span class="st">";"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## if there were no items listed, changing NA to no_listed_items</span></span>
<span>  <span class="fu">replace_na</span><span class="op">(</span><span class="fu">list</span><span class="op">(</span>items_owned <span class="op">=</span> <span class="st">"no_listed_items"</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>items_owned_logical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">items_owned</span>,</span>
<span>              values_from <span class="op">=</span> <span class="va">items_owned_logical</span>,</span>
<span>              values_fill <span class="op">=</span> <span class="fu">list</span><span class="op">(</span>items_owned_logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## pivot wider by months_lack_food</span></span>
<span>  <span class="fu">separate_rows</span><span class="op">(</span><span class="va">months_lack_food</span>, sep <span class="op">=</span> <span class="st">";"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>months_lack_food_logical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span>names_from <span class="op">=</span> <span class="va">months_lack_food</span>,</span>
<span>              values_from <span class="op">=</span> <span class="va">months_lack_food_logical</span>,</span>
<span>              values_fill <span class="op">=</span> <span class="fu">list</span><span class="op">(</span>months_lack_food_logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="co">## add some summary columns</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>number_months_lack_food <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">Jan</span><span class="op">:</span><span class="va">May</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>number_items <span class="op">=</span> <span class="fu">rowSums</span><span class="op">(</span><span class="fu">select</span><span class="op">(</span><span class="va">.</span>, <span class="va">bicycle</span><span class="op">:</span><span class="va">car</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<div id="exercise-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="exercise-1" class="callout-inner">
<h3 class="callout-title">Exercise</h3>
<div class="callout-content">
<p>Create a new code chunk for the plot, and copy the code from any of
the plots we created in the previous episode to produce a plot in the
chunk. I recommend one of the colourful plots.</p>
<p>If you are feeling adventurous, you can also create a new plot with
the <code>interviews_plotting</code> data frame.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Solution to Exercise </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interviews_plotting</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">respondent_wall_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">village</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="../fig/02-getting-started-rmarkdown-rendered-my-fancy-plot-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure>
</div>
</div>
</div>
</div>
<p>We can also create a caption with the chunk option
<code>fig.cap</code>.</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">MARKDOWN<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode markdown" tabindex="0"><code class="sourceCode markdown"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="in">```{r chunk-name, fig.cap = "I made this plot while attending an</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="in">awesome Data Carpentries workshop where I learned a ton of cool stuff!"}</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="in">Code for plot</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="in">```</span></span></code></pre>
</div>
<p>…or, ideally, something more informative.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">interviews_plotting</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">respondent_wall_type</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>fill <span class="op">=</span> <span class="va">village</span><span class="op">)</span>, position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Type of Wall in Home"</span>, y <span class="op">=</span> <span class="st">"Count"</span>, fill <span class="op">=</span> <span class="st">"Village Name"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_viridis_d</span><span class="op">(</span><span class="op">)</span> <span class="co"># add colour deficient friendly palette</span></span></code></pre>
</div>
<figure style="text-align: center"><img src="../fig/02-getting-started-rmarkdown-rendered-caption-plot-1.png" alt="I made this plot while attending an awesome Data Carpentries workshop where I learned a ton of cool stuff!" class="figure mx-auto d-block"><figcaption>
I made this plot while attending an awesome Data Carpentries workshop
where I learned a ton of cool stuff!
</figcaption></figure></section><section><h2 class="section-heading" id="other-output-options">Other output options<a class="anchor" aria-label="anchor" href="#other-output-options"></a>
</h2>
<hr class="half-width">
<p>You can convert R Markdown to a PDF or a Word document (among
others). Click the little triangle next to the <strong>Knit</strong>
button to get a drop-down menu. Or you could put
<code>pdf_document</code> or <code>word_document</code> in the initial
header of the file.</p>
<pre><code>---
title: "My Awesome Report"
author: "Emmet Brickowski"
date: ""
output: word_document
---</code></pre>
<div id="note-creating-pdf-documents" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-creating-pdf-documents" class="callout-inner">
<h3 class="callout-title">Note: Creating PDF documents</h3>
<div class="callout-content">
<p>Creating .pdf documents may require installation of some extra
software. The R package <code>tinytex</code> provides some tools to help
make this process easier for R users. With <code>tinytex</code>
installed, run <code>tinytex::install_tinytex()</code> to install the
required software (you’ll only need to do this once) and then when you
<strong>Knit</strong> to pdf <code>tinytex</code> will automatically
detect and install any additional LaTeX packages that are needed to
produce the pdf document. Visit the <a href="https://yihui.org/tinytex/" class="external-link">tinytex website</a> for more
information.</p>
</div>
</div>
</div>
<div id="note-inserting-citations-into-an-r-markdown-file" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div id="note-inserting-citations-into-an-r-markdown-file" class="callout-inner">
<h3 class="callout-title">Note: Inserting citations into an R Markdown
file</h3>
<div class="callout-content">
<p>It is possible to insert citations into an R Markdown file using the
editor toolbar. The editor toolbar includes commonly seen formatting
buttons generally seen in text editors (<em>e.g.</em>, bold and italic
buttons). The toolbar is accessible by using the settings dropdown menu
(next to the ‘Knit’ dropdown menu) to select ‘Use Visual Editor’, also
accessible through the shortcut ‘Crtl+Shift+F4’. From here, clicking
‘Insert’ allows ‘Citation’ to be selected (shortcut: ‘Crtl+Shift+F8’).
For example, searching ‘10.1007/978-3-319-24277-4’ in ‘From DOI’ and
inserting will provide the citation for <code>ggplot2</code> <span class="citation">[@wickham2016]</span>. This will also save the
citation(s) in ‘references.bib’ in the current working directory. Visit
the <a href="https://rstudio.github.io/visual-markdown-editing/" class="external-link">R
Studio site</a> for more information. Tip: obtaining citation
information from relevant packages can be done by using
<code>citation("package")</code>.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="resources">Resources<a class="anchor" aria-label="anchor" href="#resources"></a>
</h2>
<hr class="half-width">
<ul>
<li><a href="https://kbroman.org/knitr_knutshell" class="external-link">Knitr in a knutshell
tutorial</a></li>
<li>
<a href="https://www.amazon.com/exec/obidos/ASIN/1482203537/7210-20" class="external-link">Dynamic
Documents with R and knitr</a> (book)</li>
<li><a href="https://rmarkdown.rstudio.com" class="external-link">R Markdown
documentation</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/master/rmarkdown-2.0.pdf" class="external-link">R
Markdown cheat sheet</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/getting-started-with-r-markdown/" class="external-link">Getting
started with R Markdown</a></li>
<li><a href="https://commonmark.org/help/tutorial/" class="external-link">Markdown
tutorial</a></li>
<li>
<a href="https://bookdown.org/yihui/rmarkdown/" class="external-link">R Markdown: The
Definitive Guide</a> (book by RStudio team)</li>
<li><a href="https://www.rstudio.com/resources/webinars/reproducible-reporting/" class="external-link">Reproducible
Reporting</a></li>
<li><a href="https://www.rstudio.com/resources/webinars/introducing-bookdown/" class="external-link">Introducing
Bookdown</a></li>
<li><a href="https://github.com/rstudio/cheatsheets/blob/main/quarto.pdf" class="external-link">Quarto
cheat sheet</a></li>
<li><a href="https://quarto.org/docs/" class="external-link">Quarto documentation</a></li>
</ul>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>R Markdown is a useful language for creating reproducible documents
combining text and executable R-code.</li>
<li>Specify chunk options to control formatting of the output
document</li>
</ul>
</div>
</div>
</div>
</section></section><section id="aio-03-making-packages-R"><p>Content from <a href="03-making-packages-R.html">Making Packages in R</a></p>
<hr>
<p>Last updated on 2025-11-12 |

        <a href="https://github.com/adamhsparks/r-programming/edit/main/episodes/03-making-packages-R.Rmd" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>“How do I collect my code together so I can reuse it and share
it?”</li>
<li>“How do I make my own package(s)?”</li>
<li>“How do I integrate my function documentation into R’s help pages
system?”</li>
<li>“What helper tools does RStudio provide me with?”</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>“Let RStudio create the required structure of a simple R package and
review it.”</li>
<li>“Build and install the package in RStudio.”</li>
<li>“Use <code>roxygen2</code> to document functions.”</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Why should you make your own R packages?</p>
<p><strong>Reproducible research!</strong></p>
<p>An R package is the <strong>basic unit of reusable code</strong>. If
you want to reuse code later or want others to be able to use your code,
you should put it in a package.</p>
<p>An R package requires four components, visualized in the folder tree
below:</p>
<pre><code>package_name/
├── DESCRIPTION              # metadata about the package
├── man/                     # function documentation (can be generated automatically)
├── NAMESPACE                # list of user-level functions in the package (can be generated automatically)
├── R/                       # R source code
└── &lt;other_components&gt;</code></pre>
<p><em>There are other optional components. <a href="https://devguide.ropensci.org/building.html" class="external-link">rOpenSci
community</a> has written a science-focused guidebook for package
development, while <a href="https://r-pkgs.org/description.html" class="external-link">the “R
packages” book</a> contains all the fundamental information.</em></p>
<div class="section level3">
<h3 id="description-file">DESCRIPTION file<a class="anchor" aria-label="anchor" href="#description-file"></a>
</h3>
<pre class="source"><code>Package: package_name
Title: Brief package description
Description: Longer package description
Version: Version number(major.minor.patch)
Author: Name and email of package creator
Maintainer: Name and email of package maintainer (who to contact with issues)
License: Abbreviation for an open source license</code></pre>
<p>The package name can only contain letters and numbers and has to
start with a letter, but may also contain a full stop “.” character.</p>
</div>
<div class="section level3">
<h3 id="r-files">.R files<a class="anchor" aria-label="anchor" href="#r-files"></a>
</h3>
<p>Functions don’t all have to be in one file or each in separate files.
How you organize them is up to you. Suggestion: organize in a logical
manner so that you know which file holds which functions.</p>
<div id="callout1" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<span class="callout-header">Callout</span>
<div class="callout-inner">
<div class="callout-content">
<p>I name the file after the function and have one main function per
file, sometimes multiples but only the exported function that users see
is what the file is named. The rest of the functions in the file may be
called by the main exported function and that function only. Sometimes I
have large unexported functions that have their own file as well. I also
organise shared helper functions, remember, don’t repeat yourself, that
are not exported (visible to the end user) in an “internal_functions.R”
or “utilities.R” file.</p>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="making-your-first-r-package">Making your first R package<a class="anchor" aria-label="anchor" href="#making-your-first-r-package"></a>
</h3>
<p>In this lesson, we will start building a “<a href="https://hilaryparker.com/2013/04/03/personal-r-packages/" class="external-link">personal
package</a>”. This is meant to collect any kind of R code that is useful
to <em>you</em>. As you continue to evolve it after this lesson, you may
move code that belongs to the same publication, topic or a distinct
project, into their own packages. Here we begin to realise the benefit
of already documenting the functions formally earlier: we can publish
more quickly, because we didn’t leave much unfinished clean-up
business.</p>
<p>To start working on this personal package, please open RStudio’s
<code>File</code> menu and select
<code>New Project… &gt; New Directory… &gt; R Package</code>. Give it a
unique, but useful name. Your own will work just fine. Bonus points for
squeezing in an <code>R</code> ;-)</p>
<p>Also add the <code>source files</code> we created earlier (the first
versions of <code>center.R</code> and <code>rescale.R</code>), so that
we have some example code right away.</p>
<figure><img src="../fig/08-RStudio-new-package.png" alt="New package in RStudio" width="500" class="figure mx-auto d-block"></figure><p>In case you have learned about version control already, it would be
good practice to <code>create a git repository</code> now and
<code>git commit</code> each step of building this package.</p>
<figure><img src="../fig/08-RStudio-new-package-git.png" alt="Default package files in RStudio's Git pane" width="500" class="figure mx-auto d-block"></figure><p>RStudio’s “skeleton” package can already be built, using the
<code>Build &gt; Install and Restart</code> option. Note the
<code>library(...)</code> line that appears in the console. Also, notice
there is now a <code>package:YouRName</code> environment that is the
parent environment to the global environment.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">search</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<p>This means you can now take advantage of the console’s auto-complete
just like for any other package. Type <code>cen</code> and/or
<code>resc</code>, then <kbd>Tab</kbd> and test some examples like
<code>center(c(1, 2, 3), 0)</code> or
<code>rescale(c(1, 2, 3))</code>.</p>
</div>
<section><h2 class="section-heading" id="folder-and-file-structure-of-an-r-package">Folder and file structure of an R package<a class="anchor" aria-label="anchor" href="#folder-and-file-structure-of-an-r-package"></a>
</h2>
<hr class="half-width">
<p>An R package requires four components:</p>
<ul>
<li>a <code>DESCRIPTION</code> file with metadata about the package</li>
<li>an <code>R</code> directory with the code</li>
<li>a <code>man</code> directory with documentation (we will create this
automatically)</li>
<li>a <code>NAMESPACE</code> file listing user-level (“exported”)
functions in the package (we will also create this automatically)</li>
</ul>
<p><em>There are other optional components. <a href="https://r-pkgs.had.co.nz/description.html" class="external-link">Read the “R packages”
book</a> and/or the original <a href="https://cran.r-project.org/doc/manuals/r-release/R-exts.html#Package-structure" class="external-link">“Writing
R Extensions” documentation</a> for much more information.</em></p>
<div class="section level3">
<h3 id="r-files-1">.R files<a class="anchor" aria-label="anchor" href="#r-files-1"></a>
</h3>
<p>Functions don’t all have to be in one file or each in separate files.
How you organize them is up to you. Suggestion: organize in a logical
manner so that you know which file holds which functions.</p>
</div>
<div class="section level3">
<h3 id="description-file-1">
<code>DESCRIPTION</code> file<a class="anchor" aria-label="anchor" href="#description-file-1"></a>
</h3>
<p>We used RStudio’s import process to include the <code>.R</code> files
we already had. However, FAIRer (because richer in metadata)
<code>DESCRIPTION</code> files can be generated with
<code>usethis::use_description()</code>:</p>
<pre><code>Package: PackageName
Type: Package
Version: 0.1.0
Title: What the Package Does (One Line, Title Case)
Authors@R:
    person(given = "First",
           family = "Last",
           role = c("aut", "cre"),
           email = "first.last@example.com")
Description: What the package does (one paragraph).
    Use four spaces when indenting paragraphs within the Description.
License: What license it uses
Encoding: UTF-8
LazyData: true</code></pre>
<p>The package name can only contain letters and numbers and has to
start with a letter.</p>
<p>Using <code>desc::desc_normalise()</code> will format the
<code>DESCRIPTION</code> file nicely.</p>
<div id="provide-citation-metadata-in-the-description-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="provide-citation-metadata-in-the-description-file" class="callout-inner">
<h3 class="callout-title">Provide citation metadata in the
<code>DESCRIPTION</code> file</h3>
<div class="callout-content">
<p>R supports citing R packages. Have a look at the output of
<code>citation(YouRName)</code>. Does anything seem to be missing? If
yes, how and where do you think we can add that information?</p>
<p>Assuming you have an ORCiD, you may want to associate your R package
with it. Find out how to add this information, and which additional
changes you can make to the <code>DESCRIPTION</code> file.</p>
<div class="section level2">
<h2 id="hint">Hint<a class="anchor" aria-label="anchor" href="#hint"></a>
</h2>
<p>One useful resource to find the answer to such technical details is
GitHub. Search for <code>org:ROpenSci filename:DESCRIPTION</code> (this
restricts your search) to a community of practice and its R packages)
plus <a href="https://github.com/search?q=org%3AROpenSci+filename%3ADESCRIPTION+2019" class="external-link"><code>2019</code></a>
or <a href="https://github.com/search?q=org%3AROpenSci+filename%3ADESCRIPTION+orcid" class="external-link"><code>orcid</code></a>
for example.</p>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<p>The date is added in <a href="https://en.wikipedia.org/wiki/ISO_8601" class="external-link">ISO 8601</a> format:
<code>date: 2018-07-12</code>.</p>
<p>ORCiDs can only be added to machine-readable <code>Authors@R</code>
fields that use the <code>person(…)</code> function.
<code>use_description()</code> created this already, so that you can add
your ORCiD as a <code>comment = c(ORCID = "…")</code>.</p>
<p>In summary: Enabling <code>citation()</code> to convert
<code>DESCRIPTION</code> into a rich BibTeX snippet is a side-effect of
FAIR metadata for your R package.</p>
</div>
</div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="converting-function-documentation-to-help-pages">Converting function documentation to help pages<a class="anchor" aria-label="anchor" href="#converting-function-documentation-to-help-pages"></a>
</h3>
<p>Remember that we documented our functions with roxygen comments?
Let’s try and look it up:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">center</span></span>
<span><span class="fu">help</span><span class="op">(</span><span class="va">rescale</span><span class="op">)</span></span></code></pre>
</div>
<div id="why-no-documentation-for-in-specified-packages-and-libraries-we-did-write-it" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="why-no-documentation-for-in-specified-packages-and-libraries-we-did-write-it" class="callout-inner">
<h3 class="callout-title">Why
<code>No documentation for '…' in specified packages and libraries</code>?
We did write it!</h3>
<div class="callout-content">
<p>Why do you think the documentation of our package can not be found.
Hint: Look at the commit diff.</p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<p>We did not yet tell R to actually generate the <code>man</code>ual
files and folders in our package. This needs to be done with
<code>roxygen2::roxygenise()</code>.</p>
</div>
</div>
</div>
</div>
<p>After <code>Install and Restart</code>-ing again, looking up the
documentation should work.</p>
<p>What exactly does <code>roxygen2</code> do? It reads lines that begin
with <code>#'</code> as the function documentation for your package.
Descriptive tags are preceded with the <code>@</code> symbol. For
example, <code>@param</code> has information about the input parameters
for the function.</p>
</div>
<div class="section level3">
<h3 id="exporting-user-level-functions">Exporting “user-level” functions<a class="anchor" aria-label="anchor" href="#exporting-user-level-functions"></a>
</h3>
<p>We haven’t talked about the <code>NAMESPACE</code> file yet! It
belongs to the package skeleton, and was set up by RStudio with an
<code>exportPattern</code>. Any file name in <code>R/</code> that
matches it is automatically exported, meaning offered to users of your
package in the console’s tab-completion.</p>
<p>If you want to publish your package, but keep some functions hidden
(maybe because they only do auxiliary tasks), you can delete this
default file, remove the <code>@export</code> tag from the auxiliary
functions, and rerun <code>roxygenise()</code>. It’s still a good idea
to retain their other roxygen tags (esp. <code>@param</code> &amp;
<code>@return</code>).</p>
<p>Learn more about this from the <a href="https://r-pkgs.had.co.nz/namespace.html" class="external-link">“R packages”
book</a>.</p>
</div>
<div class="section level3">
<h3 id="finishing-up">Finishing up<a class="anchor" aria-label="anchor" href="#finishing-up"></a>
</h3>
<p>Please take a look at RStudio’s <code>Files</code> panes now. The
<code>man</code> directory should now contain one LaTeX-like formatted
<code>.Rd</code> file for each function.</p>
<p>In case you learned about Git already, also view the <code>.Rd</code>
files in RStudio’s <code>Git</code> pane and commit the
documentation.</p>
<div id="how-would-you-word-the-commit-message" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="how-would-you-word-the-commit-message" class="callout-inner">
<h3 class="callout-title">How would you word the commit message?</h3>
<div class="callout-content">
<p>“Add docu” is a bit moot, because that’s obvious from the filenames
and contents. Which other messages would better explain the “Why?”, or
that would be more useful when browsing the commit history later</p>
</div>
</div>
</div>
<div id="accordionHint1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button hint-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHint1" aria-expanded="false" aria-controls="collapseHint1">
  <h4 class="accordion-header" id="headingHint1"> Give me a hint </h4>
</button>
<div id="collapseHint1" class="accordion-collapse collapse" aria-labelledby="headingHint1" data-bs-parent="#accordionHint1">
<div class="accordion-body">
<ul>
<li>“roxygenise() function comments into help pages” because it mentions
the command you used</li>
<li>“Integrate function documentation into R’s standard help pages”</li>
<li>“Render function documentation as R’s standard help pages”</li>
</ul>
</div>
</div>
</div>
</div>
<p>Also, after <code>roxygenise()</code>-ing the function docu, you can
tell R to run the examples. Using R’s <code>example()</code> function on
another function’s name saves you from scrolling down its help page,
copying the example code and pasting it into the console.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">example</span><span class="op">(</span><span class="va">center</span><span class="op">)</span></span>
<span><span class="fu">example</span><span class="op">(</span><span class="va">rescale</span><span class="op">)</span></span></code></pre>
</div>
<div id="creating-a-package-for-distribution" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<span class="callout-header">Challenge</span>
<div id="creating-a-package-for-distribution" class="callout-inner">
<h3 class="callout-title">Creating a Package for Distribution</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Create some new functions for your tempConvert package to convert
from Celsius to Fahrenheit or from Kelvin to Celsius or Fahrenheit.</li>
<li>Create a package for our <code>analyze</code> function so that it
will be easy to load when more data arrives.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Converts Kelvin to Celsius</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function converts input temperatures in Kelvin to Celsius.</span></span>
<span><span class="co">#' @param temp_K The temperature in Kelvin.</span></span>
<span><span class="co">#' @return The temperature in Celsius.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' kelvin_to_celsius(273.15)</span></span>
<span></span>
<span><span class="va">kelvin_to_celsius</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp_K</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp_C</span> <span class="op">&lt;-</span> <span class="va">temp_K</span> <span class="op">-</span> <span class="fl">273.15</span></span>
<span>  <span class="va">temp_C</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Converts Celsius to Fahrenheit</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function converts input temperatures in Celsius to Fahrenheit.</span></span>
<span><span class="co">#' @param temp_C The temperature in Celsius.</span></span>
<span><span class="co">#' @return The temperature in Fahrenheit.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' celsius_to_fahrenheit(0)</span></span>
<span></span>
<span><span class="va">celsius_to_fahrenheit</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp_C</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp_F</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">temp_C</span> <span class="op">*</span> <span class="fl">9</span><span class="op">/</span><span class="fl">5</span><span class="op">)</span> <span class="op">+</span> <span class="fl">32</span></span>
<span>  <span class="va">temp_F</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' Converts Kelvin to Fahrenheit</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' This function converts input temperatures in Kelvin to Fahrenheit.</span></span>
<span><span class="co">#' @param temp_K The temperature in Kelvin.</span></span>
<span><span class="co">#' @return The temperature in Fahrenheit.</span></span>
<span><span class="co">#' @export</span></span>
<span><span class="co">#' @examples</span></span>
<span><span class="co">#' kelvin_to_fahrenheit(273.15)</span></span>
<span></span>
<span><span class="va">kelvin_to_fahrenheit</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">temp_K</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp_C</span> <span class="op">&lt;-</span> <span class="fu">kelvin_to_celsius</span><span class="op">(</span><span class="va">temp_K</span><span class="op">)</span></span>
<span>  <span class="va">temp_F</span> <span class="op">&lt;-</span> <span class="fu">celsius_to_fahrenheit</span><span class="op">(</span><span class="va">temp_C</span><span class="op">)</span></span>
<span>  <span class="va">temp_F</span></span>
<span><span class="op">}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<span class="callout-header">Key Points</span>
<div class="callout-inner">
<div class="callout-content">
<ul>
<li>A package is the basic unit of reusability in R.</li>
<li>Every package must have a DESCRIPTION file and an R directory
containing code. These are created by us.</li>
<li>A NAMESPACE file is needed as well, and a man directory containing
documentation, but both can be autogenerated.</li>
</ul>
</div>
</div>
</div>
<p>This was our basic introduction to packaging up R functions. To go on
from here, remember to functionalise R code that you use repeatedly and
incorporate it into your personal package.</p>
<p>This lesson was a adapted from <a href="https://github.com/TIBHannover/FAIR-R" class="external-link uri">https://github.com/TIBHannover/FAIR-R</a> under the
CC-by-4.0 Licence.</p>
</div>
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/adamhsparks/r-programming/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/adamhsparks/r-programming/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/adamhsparks/r-programming/" class="external-link">Source</a></p>
				<p><a href="https://github.com/adamhsparks/r-programming/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:adam.sparks@curtin.edu.au">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.17.1" class="external-link">sandpaper (0.17.1)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.9" class="external-link">pegboard (0.7.9)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.7" class="external-link">varnish (1.0.7)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "LearningResource",
  "@id": "https://adamhsparks.github.io/r-programming/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/LearningResource/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://adamhsparks.github.io/r-programming/instructor/aio.html",
  "identifier": "https://adamhsparks.github.io/r-programming/instructor/aio.html",
  "dateCreated": "2014-12-18",
  "dateModified": "2025-11-12",
  "datePublished": "2025-11-12"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo --><script>
          var _paq = window._paq = window._paq || [];
          /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
          _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
          _paq.push(["setDomains", ["*.lessons.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
          _paq.push(["setDoNotTrack", true]);
          _paq.push(["disableCookies"]);
          _paq.push(["trackPageView"]);
          _paq.push(["enableLinkTracking"]);
          (function() {
              var u="https://matomo.carpentries.org/";
              _paq.push(["setTrackerUrl", u+"matomo.php"]);
              _paq.push(["setSiteId", "1"]);
              var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0];
              g.async=true; g.src="https://matomo.carpentries.org/matomo.js"; s.parentNode.insertBefore(g,s);
          })();
        </script><!-- End Matomo Code -->
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

